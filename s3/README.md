# S3 Terraform Module

Usage for this terraform module can be found [here](../examples/s3)

## Requirements

No requirements.

## Providers

| Name                                             | Version |
| ------------------------------------------------ | ------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | 5.90.1  |

## Modules

No modules.

## Resources

| Name                                                                                                                                                                                 | Type        |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------- |
| [aws_s3_bucket.bucket](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket)                                                                        | resource    |
| [aws_s3_bucket_acl.acl](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_acl)                                                                   | resource    |
| [aws_s3_bucket_cors_configuration.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_cors_configuration)                                    | resource    |
| [aws_s3_bucket_lifecycle_configuration.lifecycle_configuration](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_lifecycle_configuration)       | resource    |
| [aws_s3_bucket_logging.logging](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_logging)                                                       | resource    |
| [aws_s3_bucket_notification.bucket_notification](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_notification)                                 | resource    |
| [aws_s3_bucket_ownership_controls.bucket_ownership](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_ownership_controls)                        | resource    |
| [aws_s3_bucket_policy.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_policy)                                                            | resource    |
| [aws_s3_bucket_public_access_block.block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_public_access_block)                                 | resource    |
| [aws_s3_bucket_server_side_encryption_configuration.sse](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_server_side_encryption_configuration) | resource    |
| [aws_s3_bucket_versioning.versioning](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_versioning)                                              | resource    |
| [aws_s3_bucket_website_configuration.website_configuration](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_website_configuration)             | resource    |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity)                                                        | data source |
| [aws_iam_policy_document.policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)                                                 | data source |

## Inputs

| Name                                                                                                                                                | Description                                                                                                                           | Type                                                                                                                                                                                                                                                                        | Default     | Required |
| --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | :------: |
| <a name="input_abort_incomplete_multipart_upload_days"></a> [abort_incomplete_multipart_upload_days](#input_abort_incomplete_multipart_upload_days) | Number of days after which Amazon S3 aborts an incomplete multipart upload. Set to -1 to disable the automatic rule creation.         | `number`                                                                                                                                                                                                                                                                    | `7`         |    no    |
| <a name="input_acl"></a> [acl](#input_acl)                                                                                                          | The ACL to apply.                                                                                                                     | `string`                                                                                                                                                                                                                                                                    | `"private"` |    no    |
| <a name="input_allow_public_access"></a> [allow_public_access](#input_allow_public_access)                                                          | Whether to allow public access to the bucket. If ACL is set to 'private', public access is always blocked regardless of this setting. | `bool`                                                                                                                                                                                                                                                                      | `false`     |    no    |
| <a name="input_bucket_notification_events"></a> [bucket_notification_events](#input_bucket_notification_events)                                     | Configuration for S3 bucket event notifications.                                                                                      | <pre>list(object({<br> events = list(string)<br> filter_prefix = optional(string, "")<br> filter_suffix = optional(string, "")<br> lambda_function_arn = optional(string, null)<br> topic_arn = optional(string, null)<br> queue_arn = optional(string, null)<br> }))</pre> | `[]`        |    no    |
| <a name="input_cloudfront"></a> [cloudfront](#input_cloudfront)                                                                                     | Whether to enable access from CloudFront distributions in the same account.                                                           | `bool`                                                                                                                                                                                                                                                                      | `false`     |    no    |
| <a name="input_cors_rule"></a> [cors_rule](#input_cors_rule)                                                                                        | CORS configuration rules for the S3 bucket. Can be provided as JSON string or as a structured object.                                 | `any`                                                                                                                                                                                                                                                                       | `[]`        |    no    |
| <a name="input_enable_logging_service"></a> [enable_logging_service](#input_enable_logging_service)                                                 | Whether to enable logging for the S3 bucket. Set this to enabled if you are creating a bucket for access logging.                     | `bool`                                                                                                                                                                                                                                                                      | `false`     |    no    |
| <a name="input_kms_key"></a> [kms_key](#input_kms_key)                                                                                              | The AWS KMS master key ID used for the SSE-KMS encryption.                                                                            | `string`                                                                                                                                                                                                                                                                    | `null`      |    no    |
| <a name="input_lifecycle_rules"></a> [lifecycle_rules](#input_lifecycle_rules)                                                                      | List of lifecycle rules to configure for the S3 bucket.                                                                               | <pre>list(object({<br> id = string<br> status = string<br> prefix = optional(string, null)<br> tags = optional(map(string), null)<br> abort_incomplete_multipart_upload_days = optional(number, null)<br><br> expiration = optional(object({<br>                            |

date = optional(string, null)<br> days = optional(number, null)<br> expired_object_delete_marker = optional(bool, null)<br> }), null)<br><br> transition = optional(list(object({<br> date = optional(string, null)<br> days = optional(number, null)<br> storage_class = string<br> })), [])<br><br> noncurrent_version_transition = optional(list(object({<br> days = number<br> storage_class = string<br> })), [])<br><br>  
 noncurrent_version_expiration = optional(object({<br> days = number<br> }), null)<br> }))</pre> | `[]` | no |
| <a name="input_logging_bucket_name"></a> [logging_bucket_name](#input_logging_bucket_name) | The name of the logging bucket, must be created separately. | `string` | `""` | no |
| <a name="input_name"></a> [name](#input_name) | The name of the bucket. (required) | `string` | n/a | yes |
| <a name="input_object_ownership"></a> [object_ownership](#input_object_ownership) | The S3 object ownership setting (BucketOwnerPreferred, ObjectWriter, or BucketOwnerEnforced). | `string` | `"ObjectWriter"` | no |
| <a name="input_tags"></a> [tags](#input_tags) | The tags to attach to the bucket. | `map(string)` | `{}` | no |
| <a name="input_versioning"></a> [versioning](#input_versioning) | Whether to enable versioning for the bucket. | `bool` | `true` | no |

## Outputs

| Name                                                                                                                 | Description |
| -------------------------------------------------------------------------------------------------------------------- | ----------- |
| <a name="output_arn"></a> [arn](#output_arn)                                                                         | n/a         |
| <a name="output_bucket_domain_name"></a> [bucket_domain_name](#output_bucket_domain_name)                            | n/a         |
| <a name="output_bucket_regional_domain_name"></a> [bucket_regional_domain_name](#output_bucket_regional_domain_name) | n/a         |
| <a name="output_id"></a> [id](#output_id)                                                                            | n/a         |
| <a name="output_name"></a> [name](#output_name)                                                                      | n/a         |
| <a name="output_region"></a> [region](#output_region)                                                                | n/a         |

<!-- BEGIN_TF_DOCS -->

## Requirements

No requirements.

## Providers

| Name                                             | Version |
| ------------------------------------------------ | ------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | 5.90.1  |

## Modules

No modules.

## Resources

| Name                                                                                                                                                                                 | Type        |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------- |
| [aws_s3_bucket.bucket](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket)                                                                        | resource    |
| [aws_s3_bucket_acl.acl](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_acl)                                                                   | resource    |
| [aws_s3_bucket_cors_configuration.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_cors_configuration)                                    | resource    |
| [aws_s3_bucket_lifecycle_configuration.lifecycle_configuration](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_lifecycle_configuration)       | resource    |
| [aws_s3_bucket_logging.logging](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_logging)                                                       | resource    |
| [aws_s3_bucket_notification.bucket_notification](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_notification)                                 | resource    |
| [aws_s3_bucket_ownership_controls.bucket_ownership](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_ownership_controls)                        | resource    |
| [aws_s3_bucket_policy.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_policy)                                                            | resource    |
| [aws_s3_bucket_public_access_block.block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_public_access_block)                                 | resource    |
| [aws_s3_bucket_server_side_encryption_configuration.sse](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_server_side_encryption_configuration) | resource    |
| [aws_s3_bucket_versioning.versioning](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_versioning)                                              | resource    |
| [aws_s3_bucket_website_configuration.website_configuration](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket_website_configuration)             | resource    |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity)                                                        | data source |
| [aws_iam_policy_document.policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)                                                 | data source |

## Inputs

| Name                                                                                                                                                | Description                                                                                                                           | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Default          | Required |
| --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- | :------: |
| <a name="input_abort_incomplete_multipart_upload_days"></a> [abort_incomplete_multipart_upload_days](#input_abort_incomplete_multipart_upload_days) | Number of days after which Amazon S3 aborts an incomplete multipart upload. Set to -1 to disable the automatic rule creation.         | `number`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `7`              |    no    |
| <a name="input_acl"></a> [acl](#input_acl)                                                                                                          | The ACL to apply.                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `"private"`      |    no    |
| <a name="input_allow_public_access"></a> [allow_public_access](#input_allow_public_access)                                                          | Whether to allow public access to the bucket. If ACL is set to 'private', public access is always blocked regardless of this setting. | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `false`          |    no    |
| <a name="input_bucket_notification_events"></a> [bucket_notification_events](#input_bucket_notification_events)                                     | Configuration for S3 bucket event notifications.                                                                                      | <pre>list(object({<br> events = list(string)<br> filter_prefix = optional(string, "")<br> filter_suffix = optional(string, "")<br> lambda_function_arn = optional(string, null)<br> topic_arn = optional(string, null)<br> queue_arn = optional(string, null)<br> }))</pre>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `[]`             |    no    |
| <a name="input_cloudfront"></a> [cloudfront](#input_cloudfront)                                                                                     | Whether to enable access from CloudFront distributions in the same account.                                                           | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `false`          |    no    |
| <a name="input_cors_rule"></a> [cors_rule](#input_cors_rule)                                                                                        | CORS configuration rules for the S3 bucket. Can be provided as JSON string or as a structured object.                                 | `any`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `[]`             |    no    |
| <a name="input_enable_logging_service"></a> [enable_logging_service](#input_enable_logging_service)                                                 | Whether to enable logging for the S3 bucket. Set this to enabled if you are creating a bucket for access logging.                     | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `false`          |    no    |
| <a name="input_kms_key"></a> [kms_key](#input_kms_key)                                                                                              | The AWS KMS master key ID used for the SSE-KMS encryption.                                                                            | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`           |    no    |
| <a name="input_lifecycle_rules"></a> [lifecycle_rules](#input_lifecycle_rules)                                                                      | List of lifecycle rules to configure for the S3 bucket.                                                                               | <pre>list(object({<br> id = string<br> status = string<br> prefix = optional(string, null)<br> tags = optional(map(string), null)<br> abort_incomplete_multipart_upload_days = optional(number, null)<br><br> expiration = optional(object({<br> date = optional(string, null)<br> days = optional(number, null)<br> expired_object_delete_marker = optional(bool, null)<br> }), null)<br><br> transition = optional(list(object({<br> date = optional(string, null)<br> days = optional(number, null)<br> storage_class = string<br> })), [])<br><br> noncurrent_version_transition = optional(list(object({<br> days = number<br> storage_class = string<br> })), [])<br><br> noncurrent_version_expiration = optional(object({<br> days = number<br> }), null)<br> }))</pre> | `[]`             |    no    |
| <a name="input_logging_bucket_name"></a> [logging_bucket_name](#input_logging_bucket_name)                                                          | The name of the logging bucket, must be created separately.                                                                           | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `""`             |    no    |
| <a name="input_name"></a> [name](#input_name)                                                                                                       | The name of the bucket. (required)                                                                                                    | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | n/a              |   yes    |
| <a name="input_object_ownership"></a> [object_ownership](#input_object_ownership)                                                                   | The S3 object ownership setting (BucketOwnerPreferred, ObjectWriter, or BucketOwnerEnforced).                                         | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `"ObjectWriter"` |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                                       | The tags to attach to the bucket.                                                                                                     | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `{}`             |    no    |
| <a name="input_versioning"></a> [versioning](#input_versioning)                                                                                     | Whether to enable versioning for the bucket.                                                                                          | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `true`           |    no    |

## Outputs

| Name                                                                                                                 | Description |
| -------------------------------------------------------------------------------------------------------------------- | ----------- |
| <a name="output_arn"></a> [arn](#output_arn)                                                                         | n/a         |
| <a name="output_bucket_domain_name"></a> [bucket_domain_name](#output_bucket_domain_name)                            | n/a         |
| <a name="output_bucket_regional_domain_name"></a> [bucket_regional_domain_name](#output_bucket_regional_domain_name) | n/a         |
| <a name="output_id"></a> [id](#output_id)                                                                            | n/a         |
| <a name="output_name"></a> [name](#output_name)                                                                      | n/a         |
| <a name="output_region"></a> [region](#output_region)                                                                | n/a         |

<!-- END_TF_DOCS -->
